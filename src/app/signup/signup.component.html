<!-- <app-home-header></app-home-header> -->


<mat-toolbar color="primary" class="top-menu mat-elevation-z5">
  <!-- <div fxLayout="row" fxLayoutAlign="space-around center" fxLayoutGap="10" style="width:100%">
    <div>
      <mat-icon class="action-icon" [routerLink]="['/']">arrow_back</mat-icon>
    </div>
    <div>
      Signup
    </div>
    <div>

    </div>
  </div> -->

  <div style="width:100%"  fxLayoutGap="10px" fxLayout="row" fxLayoutAlign="space-between center">
      <div fxFlex="15">
        <button mat-icon-button>
            <mat-icon class="action-icon" [routerLink]="['/']">arrow_back</mat-icon>
        </button>
      </div>
      <div fxFlex="65">
          <h4>Signup</h4>
      </div>
      <div fxFlex="20">    
          <!-- <button type="submit" mat-raised-button color="accent">Save</button> -->
          <button mat-raised-button [disabled]="signupForm.invalid || !existingUsers" type="button" (click)="submit(signupForm.value)"
              color="accent">Save</button>
      </div>
  </div>
</mat-toolbar>
<div class="form-body">
  <!-- <div class="top-menu-spacer">

  </div> -->
  <form [formGroup]="signupForm">
    <div fxLayout="row" fxLayoutAlign="center center">
      <mat-card style="width:90%">
        <mat-card-header>

        </mat-card-header>
        <mat-card-content>


          <div fxLayout="column" fxLayoutAlign="center start" class="field">
              <img  src="assets/images/perfecto-logo.png" height="45">
              <h4>Expense Tracker</h4>
            <label>Name*</label>
            <div>
              <mat-form-field appearance="outline" color="accent" hintLabel="Min 5 characters">
                <input matInput formControlName="name" autocomplete="off" >
                <mat-hint align="end">{{signupForm.get('name').value?.length || 0}}</mat-hint>
              </mat-form-field>

            </div>
          </div>

          <div fxLayout="column" fxLayoutAlign="center start" class="field">
            <label>Email*</label>
            <div>
              <mat-form-field appearance="outline" color="accent" hintLabel="Min 5 characters">
                <input matInput formControlName="username" autocomplete="off" (change)="validateUsername()">
                <mat-hint align="end">{{signupForm.get('username').value?.length || 0}}</mat-hint>
              </mat-form-field>

            </div>
          </div>
          <div fxLayout="column" fxLayoutAlign="center start" class="field">
            <label>Password*</label>
            <div>
              <mat-form-field appearance="outline" color="accent" hintLabel="Min 5 characters">
                <input matInput type="password" formControlName="password" autocomplete="off" (keyup.enter)="submit(signupForm.value)">
                <mat-hint align="end">{{signupForm.get('password').value?.length || 0}}</mat-hint>
              </mat-form-field>

            </div>
          </div>

          <div fxLayout="column" fxLayoutAlign="center start" class="field">
            <label>Confirm Password*</label>
            <div>
              <mat-form-field appearance="outline" color="accent" hintLabel="Min 5 characters">
                <input matInput type="password" [formControl]="confirmPassword" autocomplete="off" (keyup.enter)="submit(signupForm.value)">
                <mat-hint align="end">{{signupForm.get('password').value?.length || 0}}</mat-hint>
                <mat-error *ngIf="!confirmPassword.valid">Not matching with password!</mat-error>
              </mat-form-field>

            </div>
          </div>

          <div fxLayout="column" fxLayoutAlign="center start" class="field">
            <label>Currency</label>
            <div>
              <mat-form-field appearance="outline" color="accent">
                <mat-select formControlName="currency">
                  <mat-option *ngFor="let ccy of countryList" [value]="ccy.currencyCode">
                    {{ccy.currency}} - {{ccy.currencyCode}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
          
        </mat-card-content>
        <mat-card-actions>
          <div fxLayout="row" fxLayoutAlign="center center">
            <button mat-raised-button [disabled]="signupForm.invalid || !existingUsers" type="button" (click)="submit(signupForm.value)"
              color="accent">Register</button>
          </div>
        </mat-card-actions>

      </mat-card>
    </div>
  </form>
</div>